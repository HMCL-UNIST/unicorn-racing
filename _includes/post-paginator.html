<!-- The paginator for post list on HomgPage. -->

{% assign total_pages = include.total_pages | default: paginator.total_pages %}
{% assign current_page = include.current_page | default: paginator.page %}
<nav
  aria-label="Page Navigation"
  {% if include.lang %}data-lang="{{ include.lang }}"{% endif %}
  data-current-page="{{ current_page }}"
  data-total-pages="{{ total_pages }}"
>
  <ul class="pagination align-items-center mt-4 mb-0">
    <!-- left arrow -->
    {% if current_page > 1 and current_page <= total_pages %}
      {% assign prev_index = current_page | minus: 1 %}
      {% if prev_index > 1 %}
        {% assign prev_url = site.paginate_path | replace: ':num', prev_index | relative_url %}
      {% else %}
        {% assign prev_url = '/' | relative_url %}
      {% endif %}
    {% else %}
      {% assign prev_url = '#' %}
    {% endif %}

    <li class="page-item {% if current_page <= 1 or current_page > total_pages %}disabled{% endif %}">
      <a class="page-link" href="{{ prev_url }}" aria-label="previous-page">
        <i class="fas fa-angle-left"></i>
      </a>
    </li>

    <!-- page numbers -->
    {% assign left_ellipsis = false %}
    {% assign right_ellipsis = false %}

    {% for i in (1..total_pages) %}
      {% assign pre = current_page | minus: 1 %}
      {% assign next = current_page | plus: 1 %}
      {% assign pre_less = pre | minus: 1 %}
      {% assign next_more = next | plus: 1 %}
      {% assign show = false %}

      {% if current_page == 1 %}
        {% if i <= 3 or i == total_pages %}
          {% assign show = true %}
        {% endif %}
      {% elsif current_page == total_pages %}
        {% if i == 1 or i >= pre_less %}
          {% assign show = true %}
        {% endif %}
      {% else %}
        {% if i == 1 or i == total_pages %}
          {% assign show = true %}
        {% elsif i >= pre and i <= next %}
          {% assign show = true %}
        {% endif %}
      {% endif %}

      {% if show %}
        <!-- show number -->
        <li class="page-item {% if i == current_page %} active{% endif %}">
          <a
            class="page-link"
            href="{% if i > 1 %}{{ site.paginate_path | replace: ':num', i | relative_url }}{% else %}{{ '/' | relative_url }}{% endif %}"
          >
            {{- i -}}
          </a>
        </li>
      {% else %}
        <!-- hide number -->
        {% if i < pre and left_ellipsis == false %}
          <li class="page-item disabled">
            <span class="page-link">...</span>
          </li>
          {% assign left_ellipsis = true %}
        {% elsif i > next and right_ellipsis == false %}
          <li class="page-item disabled">
            <span class="page-link">...</span>
          </li>
          {% assign right_ellipsis = true %}
        {% endif %}
      {% endif %}
    {% endfor %}

    <!-- mobile pagination -->
    <li class="page-index align-middle">
      <span>{{ current_page }}</span>
      <span class="text-muted">/ {{ total_pages }}</span>
    </li>

    <!-- right arrow -->
    {% if current_page >= 1 and current_page < total_pages %}
      {% assign next_index = current_page | plus: 1 %}
      {% assign next_url = site.paginate_path | replace: ':num', next_index | relative_url %}
    {% else %}
      {% assign next_url = '#' %}
    {% endif %}

    <li class="page-item {% if current_page >= total_pages or current_page > total_pages %}disabled{% endif %}">
      <a class="page-link" href="{{ next_url }}" aria-label="next-page">
        <i class="fas fa-angle-right"></i>
      </a>
    </li>
  </ul>
</nav>
<!-- .pagination -->
